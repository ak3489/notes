!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s="Vtdi")}({Vtdi:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n("pLGG"),n("ZuTw");var r,u,a,c,l,d,s,A,f,m,v,p={utils:{},store:{}};function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var t=document.createElement("div");t.className="m-note",t.id=e.id||"m-note-"+Date.now(),t.innerHTML='\n\t\t<i class="u-close"></i>\n\t\t<div class="u-bar"></div>\n\t\t<div class="u-edit"  contenteditable="true"></div>\n\t\t<div class="m-time"><span>更新：</span><span class="u-timestamp">2017-07-02 15:09:02<span></div>',a(".u-edit",t).innerHTML=e.content||"",t.style.left=e.left+"px",t.style.top=e.top+"px",t.style.zIndex=e.zIndex,document.body.appendChild(t),this.note=t,this.updateTime(e.updateTimeStamp),this.addEvent()}p.utils={$:function(e,t){return(t||document).querySelector(e)},formatTime:function(e){function t(e){return 9<e?e:"0"+e}var n=new Date(e),o=n.getFullYear(),i=n.getMonth()+1,r=n.getDate(),u=n.getHours(),a=n.getMinutes(),c=n.getSeconds();return o+"-"+t(i)+"-"+t(r)+" "+t(u)+":"+t(a)+":"+t(c)},on:document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},off:document.removeEventListener?function(e,t,n){e&&t&&n&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.detachEvent("on"+t,n)}},p.store={__store_key:"__store_note",set:function(e,t){var n=this.getNotes();n[e]?Object.assign(n[e],t):n[e]=t,localStorage[this.__store_key]=JSON.stringify(n)},get:function(){var e=window.localStorage[this.__store_key];return JSON.parse(e)},remove:function(e){var t=this.getNotes();delete t[e],localStorage[this.__store_key]=JSON.stringify(t)},getNotes:function(){return JSON.parse(localStorage[this.__store_key]||"{}")}},r=p.utils,u=p.store,a=r.$,c=r.formatTime,l=r.on,d=r.off,s=null,f=A=void 0,m=0,function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(h,[{key:"init",value:function(){var e=u.getNotes();Object.keys(e).forEach((function(t){var n=e[t];m<n.zIndex&&(m=n.zIndex),new h(Object.assign(n,{id:t}))})),m+=1}},{key:"save",value:function(){var e={zIndex:this.note.style.zIndex,left:this.note.offsetLeft,top:this.note.offsetTop,content:a(".u-edit",this.note).innerHTML,updateTimeStamp:this.updateTimeInMS};u.set(this.note.id,e)}},{key:"close",value:function(){document.body.removeChild(this.note)}},{key:"updateTime",value:function(e){var t=e||Date.now(),n=c(t);a(".m-time .u-timestamp",this.note).innerHTML=n,this.updateTimeInMS=t}},{key:"addEvent",value:function(){function e(e){(s=t.note).setCapture&&s.setCapture(),A=e.clientX-t.note.offsetLeft,f=e.clientY-t.note.offsetTop,s.style.zIndex!==m-1&&(s.style.zIndex=m++,u.set(s.id,{zIndex:m-1}))}var t=this,n=a(".u-close",this.note);l(this.note,"mousedown",e);var o=void 0,i=a(".u-edit",this.note);l(i,"input",(function(){var e=i.innerHTML;clearTimeout(o),o=setTimeout((function(){var n=Date.now();u.set(t.note.id,{content:e,updateTimeStamp:n}),t.updateTime(n)}),300)})),l(n,"click",(function o(r){""!==i.innerHTML&&!window.confirm("是否要删除此便签？")||(u.remove(t.note.id),d(n,"click",o),d(t.note,"mousedown",e),t.close())}))}}]),v=h,l(document,"DOMContentLoaded",(function(e){var t;t=u.getNotes(),Object.keys(t).forEach((function(e){var n=t[e];m<n.zIndex&&(m=n.zIndex),new v(Object.assign(n,{id:e}))})),m+=1,l(a("#create"),"click",(function(){var e={left:Math.floor(Math.random()*(window.innerWidth-200)),top:Math.floor(Math.random()*(window.innerHeight-250)),zIndex:m++};new v(e).save()})),l(document,"mousemove",(function(e){if(s){var t=e.clientX-A,n=e.clientY-f,o=document.documentElement.clientWidth-s.offsetWidth,i=document.documentElement.clientHeight-s.offsetHeight;t<0?t=0:o<t&&(t=o),n<0?n=0:i<n&&(n=i),s.style.left=t+"px",s.style.top=n+"px"}})),l(document,"mouseup",(function(){s&&(u.set(s.id,{left:s.offsetLeft,top:s.offsetTop}),s.releaseCapture&&s.releaseCapture(),s=null)})),l(a("#remove"),"click",(function(){0<[].concat(i(document.querySelectorAll(".m-note"))).length&&!window.confirm("是否要清除所有便签？")||[].concat(i(document.querySelectorAll(".u-close"))).forEach((function(e){e.click()}))}))}))},ZuTw:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAMgAAADIAGP6560AAAAHdElNRQfjAQkDODO2ZcYCAAACY0lEQVRIx6XVS0iUURQH8N8M1SLNt4sCzYqoDI1CKloHLYKoTS/pZboybQiqRbYKg4wIQigMWkSLaNEqI8JVi56YRQ+zNEwMMghJatGix2KaGeeb71Ojs/nuvf/zP+ee13f5T4lFnOdbYoVKi8QMG/HGkK8zNVBlh80W+G7MqN8qlCv0yW03vZ7OQJEm+3xzS48hE35gjgJLbLRFqS6XjUcHtFK3Ac1KQtESjV64oyaKvlqfbsunzNlSN/SqC/fe57KyadOer1Ov2uBxkW7dM6BDnut6lGYfHjWQvvzsSOqsv9/FnmmbDFR5qTlN79AinkOO2aM9bXy/IdUZ8LiHkzLf4rNEjokGH7Wmd8UeOJVJy72sC8UljAVMNPoQOGn1WHFyucqg9Vnegib2Gs25U22GtdNz5YELxyV81oKYhhzvybo90ZDMa6UxEwH4lwt+qjBLvVPOuuBXQGPCcKpuF12JLFuTkRDvSenSRRwxv0MVYuqddN6lHO9ZsTKswpwQ7IDTzrmq07ZQZmEq8N36Qpp4rw8SYuKOeGd7Dl7goYPJ5RrvrQvAjZMKF5cwoimgUWPQhuSy0H0nsmIPFi4uYVRzVjIPe5oZqDaPJrXyHh9zMp/pi5RstSOzqTaoMV26dq0hhYtr0RE9qce8sPTvOnqcoxHF7rgh339IjV6d8qbVm6deZThUp9d1i6ekV7mmP/ePmJJaPZ7Zn5rzgMy13XP3rZ3KQ6k2Qx5oVaso3UgFahxy11tnzM8mhD1t1XbZpMS4YeMotFCZr+665lVQOepxLbZMteWKMKFfvwFf/qEkM5c/o66UizCOvZwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDEtMDlUMDM6NTY6NTErMDg6MDA0Kw59AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAxLTA5VDAzOjU2OjUxKzA4OjAwRXa2wQAAAEN0RVh0c29mdHdhcmUAL3Vzci9sb2NhbC9pbWFnZW1hZ2ljay9zaGFyZS9kb2MvSW1hZ2VNYWdpY2stNy8vaW5kZXguaHRtbL21eQoAAABjdEVYdHN2Zzpjb21tZW50ACBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIM5IkAsAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADkwMQaFyh4AAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAOTAxlXSaQwAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTQ2OTc3NDExvfVkDAAAABJ0RVh0VGh1bWI6OlNpemUAMjA4MzhCRZy8KQAAAGJ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2hvbWUvd3d3cm9vdC9uZXdzaXRlL3d3dy5lYXN5aWNvbi5uZXQvY2RuLWltZy5lYXN5aWNvbi5jbi9maWxlcy8xMTkvMTE5OTkzMi5wbmfBYEhmAAAAAElFTkSuQmCC"},pLGG:function(e,t){}});